<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é“¾æ¥ç…§å¦–é•œ</title>
    <style>
        body { background: #111; color: #0f0; font-family: monospace; padding: 20px; word-break: break-all; }
        h3 { border-bottom: 1px solid #444; padding-bottom: 10px; }
        .log-item { margin-bottom: 10px; padding: 10px; background: #222; border-radius: 5px; }
        .error { color: #ff5555; }
        .warn { color: #ffff55; }
        .success { color: #55ff55; }
    </style>
</head>
<body>
    <h3>ğŸ•µï¸â€â™‚ï¸ é“¾æ¥æˆåˆ†åˆ†æå™¨</h3>
    <div id="logs"></div>

    <script>
        // ğŸ‘‡ è¿™é‡Œå¡«ä½ ä¸€ç›´æŠ¥é”™çš„é‚£ä¸ªé“¾æ¥
        const TEST_URL = 'https://huggingface.co/datasets/liu1230/my-3dgs/resolve/main/scene.splat';

        const logDiv = document.getElementById('logs');
        function log(msg, type='normal') {
            const div = document.createElement('div');
            div.className = 'log-item ' + type;
            div.innerHTML = msg;
            logDiv.appendChild(div);
        }

        async function analyze() {
            log(`ğŸš€ 1. æ­£åœ¨è¯·æ±‚é“¾æ¥: <br><small>${TEST_URL}</small>`);
            
            try {
                const response = await fetch(TEST_URL);
                log(`ğŸ“¡ 2. æœåŠ¡å™¨çŠ¶æ€ç : <b>${response.status}</b>`);

                if (!response.ok) {
                    log(`âŒ è¯·æ±‚å¤±è´¥ï¼çŠ¶æ€ç ä¸æ˜¯ 200ã€‚å¯èƒ½æ˜¯ 404 (æ‰¾ä¸åˆ°) æˆ– 403 (æ— æƒé™)ã€‚`, 'error');
                    return;
                }

                // è¯»å–å‰ 200 ä¸ªå­—ç¬¦
                const text = await response.text();
                const head = text.substring(0, 300);
                
                // è½¬ä¹‰ HTML æ ‡ç­¾ä»¥ä¾¿æ˜¾ç¤º
                const safeHead = head.replace(/</g, '&lt;').replace(/>/g, '&gt;');

                log(`ğŸ“ 3. æ–‡ä»¶å¼€å¤´å†…å®¹ (å‰300å­—ç¬¦):<br><br><code style="color:white">${safeHead}</code>`);

                // === æ ¸å¿ƒåˆ†æé€»è¾‘ ===
                if (head.includes('<!DOCTYPE html>') || head.includes('<html')) {
                    log(`âŒ <b>ç ´æ¡ˆäº†ï¼è¿™æ˜¯ä¸€å¼ ç½‘é¡µï¼</b>`, 'error');
                    log(`ğŸ‘‰ åŸå› åˆ†æï¼š<br>è™½ç„¶é“¾æ¥æ˜¯ .splat ç»“å°¾ï¼Œä½†æœåŠ¡å™¨è¿”å›äº† HTML é¡µé¢ã€‚<br>è¿™é€šå¸¸æ„å‘³ç€ï¼š<br>1. éœ€è¦ç™»å½• (Redirect to login)<br>2. ä»“åº“è™½ç„¶å…¬å¼€ï¼Œä½†éœ€è¦<b>"åŒæ„åè®®"</b> (Gated Dataset)<br>3. é“¾æ¥è·¯å¾„é‡Œæœ‰å¤§å°å†™é”™è¯¯ï¼Œè·³åˆ°äº† 404 é¡µé¢ã€‚`, 'warn');
                } else if (head.startsWith('version https://git-lfs')) {
                    log(`âš ï¸ <b>è¿™æ˜¯ LFS æŒ‡é’ˆæ–‡ä»¶ï¼</b>`, 'warn');
                    log(`ğŸ‘‰ åŸå› åˆ†æï¼š<br>ä½ ä¸‹è½½åˆ°äº† Git LFS çš„çº¯æ–‡æœ¬æŒ‡é’ˆï¼Œè€Œä¸æ˜¯äºŒè¿›åˆ¶å¤§æ–‡ä»¶ã€‚<br>è¿™é€šå¸¸æ˜¯å› ä¸º Hugging Face çš„ CDN è¿˜æ²¡ç¼“å­˜å¥½ï¼Œæˆ–è€…ä¸‹è½½æ–¹å¼ä¸å¯¹ã€‚`, 'warn');
                } else {
                    log(`âœ… <b>æ­å–œï¼çœ‹èµ·æ¥æ˜¯äºŒè¿›åˆ¶ä¹±ç ï¼</b>`, 'success');
                    log(`ğŸ‘‰ è¿™è¯´æ˜é“¾æ¥æ²¡é—®é¢˜ã€‚å¦‚æœå¼•æ“è¿˜æŠ¥é”™ï¼Œé‚£åªèƒ½æ˜¯å¼•æ“ç‰ˆæœ¬å¤ªæ—§ï¼Œæˆ–è€…æ–‡ä»¶æœ¬èº«æŸåäº†ã€‚`, 'success');
                }

            } catch (err) {
                log(`âŒ ç½‘ç»œå´©æºƒ: ${err.message}`, 'error');
            }
        }

        analyze();
    </script>
</body>
</html>
